# Generated by Django 5.2.7 on 2025-10-29 17:21

import django.db.models.deletion
import django.utils.timezone
from django.conf import settings
from django.db import migrations, models
from inspect import signature as _mutmut_signature
from typing import Annotated
from typing import Callable
from typing import ClassVar


MutantDict = Annotated[dict[str, Callable], "Mutant"]


def _mutmut_trampoline(orig, mutants, call_args, call_kwargs, self_arg = None):
    """Forward call to original or mutated function, depending on the environment"""
    import os
    mutant_under_test = os.environ['MUTANT_UNDER_TEST']
    if mutant_under_test == 'fail':
        from mutmut.__main__ import MutmutProgrammaticFailException
        raise MutmutProgrammaticFailException('Failed programmatically')      
    elif mutant_under_test == 'stats':
        from mutmut.__main__ import record_trampoline_hit
        record_trampoline_hit(orig.__module__ + '.' + orig.__name__)
        result = orig(*call_args, **call_kwargs)
        return result
    prefix = orig.__module__ + '.' + orig.__name__ + '__mutmut_'
    if not mutant_under_test.startswith(prefix):
        result = orig(*call_args, **call_kwargs)
        return result
    mutant_name = mutant_under_test.rpartition('.')[-1]
    if self_arg:
        # call to a class method where self is not bound
        result = mutants[mutant_name](self_arg, *call_args, **call_kwargs)
    else:
        result = mutants[mutant_name](*call_args, **call_kwargs)
    return result


class Migration(migrations.Migration):

    initial = True

    dependencies = [
        migrations.swappable_dependency(settings.AUTH_USER_MODEL),
    ]

    operations = [
        migrations.CreateModel(
            name='Aluno',
            fields=[
                ('id_aluno', models.BigIntegerField(primary_key=True, serialize=False)),
                ('nome', models.CharField(max_length=200)),
                ('email', models.EmailField(max_length=254, unique=True)),
                ('telefone', models.CharField(max_length=20)),
            ],
            options={
                'db_table': 'alunos',
            },
        ),
        migrations.CreateModel(
            name='Curso',
            fields=[
                ('id_curso', models.BigIntegerField(primary_key=True, serialize=False)),
                ('nome', models.CharField(max_length=150)),
            ],
            options={
                'db_table': 'cursos',
            },
        ),
        migrations.CreateModel(
            name='Departamento',
            fields=[
                ('id_departamento', models.BigIntegerField(primary_key=True, serialize=False)),
                ('nome_departamento', models.CharField(max_length=150, unique=True)),
            ],
            options={
                'db_table': 'departamentos',
            },
        ),
        migrations.CreateModel(
            name='Professor',
            fields=[
                ('id_professor', models.BigIntegerField(primary_key=True, serialize=False)),
                ('nome', models.CharField(max_length=200)),
                ('email', models.EmailField(max_length=254, unique=True)),
                ('link_citations', models.CharField(blank=True, max_length=500, null=True)),
                ('departamento', models.ForeignKey(blank=True, db_column='id_departamento', null=True, on_delete=django.db.models.deletion.SET_NULL, related_name='professores', to='core.departamento')),
                ('usuario', models.OneToOneField(blank=True, db_column='id_prof', null=True, on_delete=django.db.models.deletion.SET_NULL, to=settings.AUTH_USER_MODEL)),
            ],
            options={
                'db_table': 'professores',
            },
        ),
        migrations.CreateModel(
            name='AlunoProj',
            fields=[
                ('id', models.AutoField(primary_key=True, serialize=False)),
                ('ativo', models.BooleanField(default=True)),
                ('datainicio', models.DateField(default=django.utils.timezone.now)),
                ('aluno', models.ForeignKey(db_column='id_aluno', on_delete=django.db.models.deletion.CASCADE, to='core.aluno')),
            ],
            options={
                'db_table': 'aluno_proj',
            },
        ),
        migrations.AddField(
            model_name='aluno',
            name='curso',
            field=models.ForeignKey(db_column='id_curso', on_delete=django.db.models.deletion.PROTECT, related_name='alunos', to='core.curso'),
        ),
        migrations.AddField(
            model_name='curso',
            name='departamento',
            field=models.ForeignKey(db_column='id_departamento', on_delete=django.db.models.deletion.CASCADE, related_name='cursos', to='core.departamento'),
        ),
        migrations.CreateModel(
            name='HistAluno',
            fields=[
                ('id', models.AutoField(primary_key=True, serialize=False)),
                ('cod_disciplina', models.CharField(max_length=20)),
                ('aprovado', models.BooleanField(default=False)),
                ('aluno', models.ForeignKey(db_column='id_aluno', on_delete=django.db.models.deletion.CASCADE, to='core.aluno')),
                ('departamento', models.ForeignKey(db_column='id_departamento', on_delete=django.db.models.deletion.CASCADE, to='core.departamento')),
            ],
            options={
                'db_table': 'hist_alunos',
            },
        ),
        migrations.CreateModel(
            name='ProfessorLattes',
            fields=[
                ('professor', models.OneToOneField(db_column='id_professor', on_delete=django.db.models.deletion.CASCADE, primary_key=True, serialize=False, to='core.professor')),
                ('cod_lattes', models.CharField(max_length=50, unique=True)),
                ('nome', models.CharField(max_length=200)),
                ('subarea', models.CharField(max_length=150)),
                ('link', models.URLField(max_length=500)),
                ('palavras_chave', models.TextField(blank=True, help_text='Palavras-chave de pesquisa, separadas por vírgula')),
            ],
            options={
                'db_table': 'professores_lattes',
            },
        ),
        migrations.CreateModel(
            name='Orientador',
            fields=[
                ('id', models.AutoField(primary_key=True, serialize=False)),
                ('ativo', models.BooleanField(default=True)),
                ('datainicio', models.DateField(default=django.utils.timezone.now)),
                ('professor', models.ForeignKey(db_column='id_prof', on_delete=django.db.models.deletion.CASCADE, to='core.professor')),
            ],
            options={
                'db_table': 'orientador',
            },
        ),
        migrations.CreateModel(
            name='Assessor',
            fields=[
                ('id', models.AutoField(primary_key=True, serialize=False)),
                ('ativo', models.BooleanField(default=True)),
                ('datainicio', models.DateField(default=django.utils.timezone.now)),
                ('professor', models.ForeignKey(db_column='id_prof', on_delete=django.db.models.deletion.CASCADE, to='core.professor')),
            ],
            options={
                'db_table': 'assessores',
            },
        ),
        migrations.CreateModel(
            name='Projeto',
            fields=[
                ('id_proj', models.AutoField(primary_key=True, serialize=False)),
                ('tema', models.CharField(blank=True, max_length=255, null=True)),
                ('tipo', models.IntegerField(blank=True, choices=[(1, 'Iniciação Científica'), (2, 'Trabalho de Conclusão de Curso'), (3, 'Mestrado'), (4, 'Doutorado'), (5, 'Extensão')], null=True)),
                ('resumo', models.TextField(blank=True, null=True)),
                ('palavra_chave', models.CharField(blank=True, max_length=255, null=True)),
                ('duracao', models.IntegerField(blank=True, help_text='Duração em meses', null=True)),
                ('bolsa', models.CharField(blank=True, choices=[('FEI', 'FEI'), ('CNPQ', 'CNPq'), ('FAPESP', 'FAPESP')], max_length=10, null=True)),
                ('pendencia', models.IntegerField(choices=[(1, 'Esperando aprovação da Coordenação'), (2, 'Esperando aprovação do assessor'), (3, 'Esperando aprovação do RH'), (4, 'Aprovado'), (5, 'Cancelado'), (6, 'Finalizado'), (7, 'Esperando relatório parcial'), (8, 'Esperando resposta do assessor ao relatório parcial'), (9, 'Esperando relatório final'), (10, 'Esperando resposta do assessor ao relatório final'), (11, 'Esperando assinaturas')], default=1)),
                ('mongo_id', models.CharField(blank=True, db_column='_id', max_length=24, null=True, unique=True)),
                ('melhor_corretor', models.TextField(blank=True, help_text='Texto retornado pela função de melhor corretor', null=True)),
                ('alunos', models.ManyToManyField(related_name='projetos', through='core.AlunoProj', to='core.aluno')),
                ('assessores', models.ManyToManyField(related_name='projetos_assessorados', through='core.Assessor', to='core.professor')),
                ('orientadores', models.ManyToManyField(related_name='projetos_orientados', through='core.Orientador', to='core.professor')),
            ],
            options={
                'db_table': 'projetos',
            },
        ),
        migrations.AddField(
            model_name='orientador',
            name='projeto',
            field=models.ForeignKey(db_column='id_proj', on_delete=django.db.models.deletion.CASCADE, to='core.projeto'),
        ),
        migrations.AddField(
            model_name='assessor',
            name='projeto',
            field=models.ForeignKey(db_column='id_proj', on_delete=django.db.models.deletion.CASCADE, to='core.projeto'),
        ),
        migrations.AddField(
            model_name='alunoproj',
            name='projeto',
            field=models.ForeignKey(db_column='id_proj', on_delete=django.db.models.deletion.CASCADE, to='core.projeto'),
        ),
        migrations.AlterUniqueTogether(
            name='orientador',
            unique_together={('professor', 'projeto')},
        ),
        migrations.AlterUniqueTogether(
            name='assessor',
            unique_together={('professor', 'projeto')},
        ),
        migrations.AlterUniqueTogether(
            name='alunoproj',
            unique_together={('aluno', 'projeto')},
        ),
    ]
